# 非暴力沟通系统整合计划（修订版）

本文档概述了将非暴力沟通AI助手（index.html）与非暴力沟通卡片系统（frontend目录）整合的计划。

## 整合目标

1. 将AI助手作为卡片系统的一个功能页面整合
2. 统一导航栏，实现页面间的无缝跳转
3. 统一设计风格，保持一致的用户体验
4. 保留直接API调用功能，避免不必要的复杂性

## 整合步骤

### 第一阶段：调整API调用方式（已修正）

1. ✅ 保留直接调用Coze API的方式
2. ✅ 确保API密钥正确设置
3. ❌ 移除云函数相关代码和配置（不需要）

### 第二阶段：文件结构重组

1. 创建新的项目目录结构
   ```
   /nvc-integrated/
   ├── index.html               # 主页（卡片系统首页）
   ├── assets/                  # 资源文件
   ├── pages/                   # 页面目录
   │   ├── ai-assistant.html    # AI助手页面（原index.html）
   │   └── ...                  # 其他页面
   ```

2. 复制卡片系统文件到新目录
3. 将index.html（AI助手）移动到pages目录并重命名为ai-assistant.html

### 第三阶段：导航栏整合

1. 提取卡片系统的导航栏代码
2. 在ai-assistant.html中添加相同的导航栏
3. 在所有导航栏中添加"AI助手"链接

### 第四阶段：样式统一

1. 分析两个系统的CSS样式
2. 创建共享样式表，合并重复样式
3. 调整ai-assistant.html的样式以匹配卡片系统

### 第五阶段：功能整合

1. 确保JavaScript不冲突
2. 调整API调用代码，确保在新的目录结构中正常工作
3. 测试所有功能

### 第六阶段：测试与部署

1. 本地测试所有页面
2. 部署到腾讯云
3. 进行最终测试

## 任务分配

| 阶段 | 优先级 | 预估时间 |
|-----|-------|---------|
| 调整API调用方式 | 高 | 已完成 |
| 文件结构重组 | 高 | 2小时 |
| 导航栏整合 | 中 | 2小时 |
| 样式统一 | 中 | 3-4小时 |
| 功能整合 | 中 | 4-5小时 |
| 测试与部署 | 高 | 2-3小时 |

## 注意事项

1. **API密钥安全**：虽然直接调用API简单，但需关注前端暴露API密钥的安全风险
2. **CORS处理**：确保Coze API允许来自您部署域名的跨域请求
3. **样式冲突处理**：注意处理可能的CSS类名冲突
4. **资源路径调整**：更新文件路径引用，适应新的目录结构
5. **响应式设计**：确保在所有设备上保持一致的用户体验

## 后续优化

完成基本整合后，可以考虑以下优化：

1. 添加AI助手与练习系统的数据共享
2. 优化加载性能
3. 添加更多交互功能
4. 考虑将部分静态内容转换为动态加载
5. 如有必要，后续可考虑添加服务端代理保护API密钥

## 时间线

- 第一阶段：已完成（修正）
- 第二至第五阶段：接下来3-5天
- 第六阶段：1-2天
- 总计：预计1周内完成整合 